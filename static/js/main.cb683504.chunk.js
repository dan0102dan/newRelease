(this.webpackJsonpnewrelease=this.webpackJsonpnewrelease||[]).push([[0],{287:function(t,e,r){},288:function(t,e,r){"use strict";r.r(e);r(175),r(201),r(203),r(204),r(206),r(207),r(208),r(209),r(210),r(211),r(212),r(213),r(215),r(216),r(217),r(218),r(219),r(220),r(221),r(222),r(223),r(224),r(226),r(227),r(228),r(229),r(230),r(231),r(232),r(233),r(234),r(235),r(236),r(237),r(238),r(239),r(240),r(241),r(242),r(243);var s=r(1),i=r(0),n=r.n(i),a=r(109),o=r.n(a),c=r(38),l=r(57),u=r(13),d=r.n(u),p=r(28),h=r(24),b=r(25),g=r(27),j=r(26),f=r(14),m=r.n(f),v=r(30),x=r.n(v),O=r(3),k=(r(106),r(125)),w=r(50),y=r.n(w),C=r(126),A=r.n(C),S=r(42),B=r.n(S),P=function(t){Object(g.a)(r,t);var e=Object(j.a)(r);function r(t){var s;return Object(h.a)(this,r),(s=e.call(this,t)).state={snackbar:null,fetching:!1,isCooldown:!1},s}return Object(b.a)(r,[{key:"componentDidMount",value:function(){this.getCatalog()}},{key:"openError",value:function(t){var e=this;this.setState({snackbar:Object(s.jsx)(O.z,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:Object(s.jsx)(O.b,{size:24,style:{backgroundImage:"linear-gradient(135deg, #fc7373, #cb5e5a)"},children:Object(s.jsx)(B.a,{fill:"#fff",width:14,height:14})}),children:t})})}},{key:"getCatalog",value:function(){var t=this;x.a.post("https://music.dan0102dan.ru/HomeCatalog",{sign:window.location.search.slice(1)}).then((function(e){var r,s,i,n,a,o,c=e.data;if(console.log(c.userCatalog),(null===c||void 0===c?void 0:c.userCatalog)&&(null===(r=c.userCatalog)||void 0===r||null===(s=r.tracks)||void 0===s?void 0:s.data)||(null===(i=c.userCatalog)||void 0===i||null===(n=i.artists)||void 0===n?void 0:n.data)||(null===(a=c.userCatalog)||void 0===a||null===(o=a.albums)||void 0===o?void 0:o.data)){var l;if(null===(l=c.userCatalog)||void 0===l?void 0:l.novelties){c.userCatalog.newAlbums=[];var u,d=Object(k.a)(c.userCatalog.novelties);try{for(d.s();!(u=d.n()).done;){var p=u.value;if(p.albums.filter((function(t){return t.release_date})).length>0){p.last_release=Math.max.apply(Math,p.albums.filter((function(t){return t.release_date})).map((function(t){return t.release_date})));var h=p.albums.find((function(t){return t.release_date===p.last_release}));h.artistId=p.id,c.userCatalog.newAlbums.push(h)}else p.last_release=0}}catch(b){d.e(b)}finally{d.f()}c.userCatalog.novelties.sort((function(t,e){return e.last_release-t.last_release})),c.userCatalog.newAlbums.sort((function(t,e){return e.release_date-t.release_date}))}t.props.setState({catalog:c.userCatalog,popout:null}),t.setState({fetching:!1})}})).catch((function(e){var r,s;t.setState({fetching:!1}),t.openError((null===e||void 0===e||null===(r=e.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)?e.response.data.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445")}))}},{key:"search",value:function(){var t=Object(p.a)(d.a.mark((function t(){var e=this;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({isCooldown:!0}),t.next=3,x.a.post("https://music.dan0102dan.ru/search",{q:this.props.search}).then((function(t){var r,s,i=t.data;(null===i||void 0===i||null===(r=i.searchResults)||void 0===r?void 0:r.total)>0&&(null===i||void 0===i||null===(s=i.searchResults)||void 0===s?void 0:s.data)?e.props.setState({searchResults:i.searchResults.data}):e.props.setState({searchResults:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})})).catch((function(t){var r,s;e.openError((null===t||void 0===t||null===(r=t.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)?t.response.data.message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435")}));case 3:this.setState({isCooldown:!1});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t,e,r,i,n,a,o,l,u,h,b,g,j,f=this;return Object(s.jsxs)(O.r,{id:this.props.id,children:[Object(s.jsx)(O.s,{left:Object(s.jsx)(O.b,{style:{marginLeft:-5,cursor:"pointer"},size:36,src:null===(t=this.props.user)||void 0===t?void 0:t.photo_200,onClick:function(){f.props.setPopout(Object(s.jsx)(O.w,{})),x.a.post("https://music.dan0102dan.ru/profile",{sign:window.location.search.slice(1)}).then((function(t){var e=t.data;e.artists.map((function(t){return t.toggle=!0})),f.props.setState((function(t){return{user:Object(c.a)(Object(c.a)({},t.user),{},{artists:e.artists})}})),f.props.goToPage("profile"),f.props.setPopout(null)})).catch((function(t){var e,r;f.openError((null===t||void 0===t||null===(e=t.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)?t.response.data.message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"),f.props.setPopout(null)}))}}),separator:!1,children:Object(s.jsx)(O.x,{value:this.props.search,maxLength:100,onChange:function(t){var e=t.target.value;if(f.props.search!==e){try{window.scrollTo({top:0,behavior:"smooth"})}catch(r){window.scrollTo(0,0)}f.props.setState({searchResults:Object(s.jsx)(O.w,{}),search:e}),setTimeout((function(){e.length>0&&!f.state.isCooldown&&f.search()}),500)}},onKeyDown:function(t){return"Enter"===t.key&&document.activeElement.blur()}})}),this.props.search.trim()?Array.isArray(this.props.searchResults)&&this.props.searchResults.length>0&&!this.state.isCooldown?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(O.k,{separator:"hide",header:Object(s.jsx)(O.l,{mode:"secondary",children:"\u0410\u0440\u0442\u0438\u0441\u0442\u044b"}),children:Object(s.jsx)(O.m,{children:Object(s.jsx)("div",{style:{display:"flex"},children:this.props.searchResults.map((function(t,e,r){var i=t.artist;return r.findIndex((function(t){return t.artist.id===i.id}))>=e&&Object(s.jsxs)("div",{style:{display:"flex",flexShrink:0,width:80,height:90,flexDirection:"column",alignItems:"center",fontSize:12,paddingLeft:4,cursor:"pointer"},onClick:function(){return f.props.getArtistsCard(i.id)},children:[Object(s.jsx)(O.b,{size:64,src:i.picture_xl}),Object(s.jsx)("div",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:64,marginTop:4},children:i.name})]},i.id)}))})})}),Object(s.jsx)(O.k,{separator:"hide",header:Object(s.jsx)(O.l,{mode:"secondary",children:"\u041f\u0435\u0441\u043d\u0438 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u0439"}),children:this.props.searchResults.map((function(t){return Object(s.jsx)(O.y,{style:{cursor:"pointer"},expandable:!0,before:Object(s.jsx)(O.b,{mode:"image",src:t.album.cover_medium}),description:t.artist.name,onClick:function(){return f.props.getArtistsCard(t.artist.id)},children:t.title},t.id)}))})]}):Object(s.jsx)(O.j,{children:Object(s.jsx)(O.B,{level:"1",weight:"semibold",style:{marginTop:32},children:this.state.isCooldown?Object(s.jsx)(O.w,{}):this.props.searchResults})}):Object(s.jsxs)(O.u,{onRefresh:Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.setState({fetching:!0}),f.getCatalog();case 2:case"end":return t.stop()}}),t)}))),isFetching:this.state.fetching,children:[(null===(e=this.props.catalog)||void 0===e||null===(r=e.newAlbums)||void 0===r?void 0:r.length)>0&&Object(s.jsx)(O.k,{separator:"hide",header:Object(s.jsx)(O.l,{indicator:Object(s.jsx)(O.i,{size:"s",mode:"prominent",children:this.props.catalog.newAlbums.length}),aside:(null===(i=this.props.catalog)||void 0===i||null===(n=i.newAlbums)||void 0===n?void 0:n.length)>1&&Object(s.jsx)(O.n,{onClick:function(){f.props.setState({from:"homeLikes"}),f.props.goToPage("viewAllAlbums")},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}),children:"\u041d\u0435\u0434\u0430\u0432\u043d\u0438\u0435 \u0440\u0435\u043b\u0438\u0437\u044b"}),children:Object(s.jsx)(O.f,{children:this.props.catalog.newAlbums.map((function(t){return Object(s.jsxs)(O.e,{style:{width:186,height:238,cursor:"pointer",lineHeight:0},onClick:function(){return f.props.getArtistsCard(t.artistId)},children:[Object(s.jsx)("img",{style:{width:186,height:186,borderRadius:4},src:t.cover_xl,alt:""}),Object(s.jsx)(O.A,{weight:"medium",style:{textAlign:"left",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:186,marginTop:7},children:t.title}),Object(s.jsxs)(O.A,{weight:"regular",style:{textAlign:"left",marginTop:2.5,fontSize:13,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:186},children:["\u0410\u043b\u044c\u0431\u043e\u043c \u0432\u044b\u0448\u0435\u043b ",new Date(t.release_date).toLocaleString("ru",{day:"numeric",month:"numeric",year:"numeric"})]})]},t.id)}))})}),Object(s.jsx)(O.k,{separator:"hide",header:Object(s.jsx)(O.l,{aside:(null===(a=this.props.catalog)||void 0===a||null===(o=a.artists)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.length)>0&&Object(s.jsx)(O.n,{onClick:function(){f.props.setState({from:"popularArtists"}),f.props.goToPage("viewAllArtists")},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}),children:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0430\u0440\u0442\u0438\u0441\u0442\u044b"}),children:Object(s.jsx)(O.f,{children:(null===(u=this.props.catalog)||void 0===u||null===(h=u.artists)||void 0===h||null===(b=h.data)||void 0===b?void 0:b.length)>0?this.props.catalog.artists.data.map((function(t){return Object(s.jsxs)(O.e,{style:{width:124,height:154,cursor:"pointer",lineHeight:0},onClick:function(){return f.props.getArtistsCard(t.id)},children:[Object(s.jsx)("img",{style:{width:124,height:124,borderRadius:"50%"},src:t.picture_xl,alt:""}),Object(s.jsx)(O.A,{weight:"medium",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:124,marginTop:7},children:t.name})]},t.id)})):Object(s.jsx)(O.e,{children:Object(s.jsx)(w.SkeletonTheme,{color:"var(--skeleton_color)",highlightColor:"var(--skeleton_highlight)",children:Object(s.jsx)(y.a,{circle:!0,height:124,width:124,style:{marginRight:8},count:10})})})})}),Object(s.jsx)(O.k,{separator:"hide",header:Object(s.jsx)(O.l,{children:"\u041b\u0443\u0447\u0448\u0438\u0435 \u0442\u0440\u0435\u043a\u0438"}),children:(null===(g=this.props.catalog)||void 0===g||null===(j=g.tracks)||void 0===j?void 0:j.data)?this.props.catalog.tracks.data.map((function(t,e,r){return Object(s.jsxs)(O.y,{className:"popularSongs",style:{marginRight:8,marginLeft:8,background:"linear-gradient(to left, rgba(255, 255, 255, 0), rgba(0, 0, 0, .35)), ".concat(t.background),borderTopLeftRadius:0===e?15:0,borderTopRightRadius:0===e?15:0,borderBottomLeftRadius:e===r.length-1?15:0,borderBottomRightRadius:e===r.length-1?15:0},disabled:!0,before:Object(s.jsx)(O.b,{mode:"image",src:t.album.cover_medium}),after:Object(s.jsx)(A.a,{fill:"#ffffff",onClick:function(){return f.props.getArtistsCard(t.artist.id)}}),description:t.artist.name,children:[t.title," ",t.explicit_lyrics&&f.props.supportsEmoji&&"\ud83c\udd74"]},t.id)})):Object(s.jsx)("div",{style:{marginRight:8,marginLeft:8},children:Object(s.jsx)(w.SkeletonTheme,{color:"var(--skeleton_color)",highlightColor:"var(--skeleton_highlight)",children:Object(s.jsx)(y.a,{duration:1.75,style:{borderRadius:15},height:360})})})}),!this.props.catalog.subscriber&&Object(s.jsx)(O.k,{separator:"hide",children:Object(s.jsx)(O.c,{header:"\u0411\u043e\u043b\u044c\u0448\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u0445 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439 \u0432 \u0433\u0440\u0443\u043f\u043f\u0435",subheader:"\u041f\u043e\u0434\u043f\u0438\u0448\u0438\u0441\u044c, \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0432\u0430\u0436\u043d\u0443\u044e \u043d\u043e\u0432\u0438\u043d\u043a\u0443 \u0438\u043b\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0435!",asideMode:"expand",onClick:function(){var t=document.createElement("a");t.target="_blank",t.href="https://vk.com/public74612115",t.click()}})})]}),this.state.snackbar]})}}]),r}(n.a.Component),R=function(t){Object(g.a)(r,t);var e=Object(j.a)(r);function r(t){var s;return Object(h.a)(this,r),(s=e.call(this,t)).state={snackbar:null,isCooldown:!1},s}return Object(b.a)(r,[{key:"openError",value:function(t){var e=this;this.setState({snackbar:Object(s.jsx)(O.z,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:Object(s.jsx)(O.b,{size:24,style:{backgroundImage:"linear-gradient(135deg, #fc7373, #cb5e5a)"},children:Object(s.jsx)(B.a,{fill:"#fff",width:14,height:14})}),children:t})})}},{key:"turnNotifications",value:function(){var t=Object(p.a)(d.a.mark((function t(e,r){var i,n,a,o,c,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.props.setPopout(Object(s.jsx)(O.w,{})),!e||this.state.isCooldown||!(null===(i=window)||void 0===i||null===(n=i.location)||void 0===n?void 0:n.search)){t.next=14;break}return t.prev=3,this.setState({isCooldown:!0}),t.next=7,m.a.send("VKWebAppAllowMessagesFromGroup",{group_id:74612115});case 7:this.setState({isCooldown:!1}),t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(3),this.setState({isCooldown:!1}),t.abrupt("return");case 14:return t.next=16,x.a.post("https://music.dan0102dan.ru/notifications",{toggle:e,id:r,sign:window.location.search.slice(1)});case 16:a=t.sent,(o=this.props.user).artists[null===o||void 0===o?void 0:o.artists.findIndex((function(t){return(null===t||void 0===t?void 0:t.id)===a.data.artist}))].toggle=a.data.toggle,this.props.setState({user:o}),this.setState({isCooldown:!1}),this.props.setPopout(null),t.next=31;break;case 24:t.prev=24,t.t1=t.catch(0),console.log(t.t1),this.openError((null===t.t1||void 0===t.t1||null===(c=t.t1.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.message)?t.t1.response.data.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439"),this.setState({isCooldown:!1}),this.props.setPopout(null),m.a.send("VKWebAppTapticNotificationOccurred",{type:"error"}).catch((function(){}));case 31:case"end":return t.stop()}}),t,this,[[0,24],[3,10]])})));return function(e,r){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t,e,r=this;return Object(s.jsxs)(O.r,{id:this.props.id,children:[Object(s.jsx)(O.s,{separator:!1,left:Object(s.jsx)(O.t,{style:{cursor:"pointer"},onClick:this.props.goBack}),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),(null===(t=this.props.user)||void 0===t||null===(e=t.artists)||void 0===e?void 0:e.length)>0?Object(s.jsx)(O.k,{separator:"hide",header:Object(s.jsx)(O.l,{children:"\u0410\u0440\u0442\u0438\u0441\u0442\u044b, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0412\u044b \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c"}),children:Object(s.jsx)(O.o,{children:this.props.user.artists.map((function(t){return Object(s.jsx)(O.g,{style:{cursor:"pointer"},before:Object(s.jsx)(O.b,{src:t.picture_xl,size:50}),selectable:!0,checked:t.toggle,onChange:function(e){r.turnNotifications(e.target.checked,t.id),r.props.setPopout(Object(s.jsx)(O.w,{}))},children:t.name},t.id)}))})}):Object(s.jsx)(O.B,{level:"4",weight:"semibold",style:{textAlign:"center",marginTop:12},children:"\u0412\u044b \u043f\u043e\u043a\u0430 \u043d\u0438 \u043d\u0430 \u043a\u043e\u0433\u043e \u043d\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c("}),this.state.snackbar]})}}]),r}(n.a.Component),T=(r(285),function(t){Object(g.a)(r,t);var e=Object(j.a)(r);function r(){return Object(h.a)(this,r),e.apply(this,arguments)}return Object(b.a)(r,[{key:"render",value:function(){var t=this;return Object(s.jsxs)(O.r,{id:this.props.id,children:[Object(s.jsx)(O.s,{separator:!1,left:Object(s.jsx)(O.t,{style:{cursor:"pointer"},onClick:this.props.goBack}),children:"\u0410\u0440\u0442\u0438\u0441\u0442\u044b"}),Object(s.jsx)(O.k,{separator:"hide",children:this.props.catalog.artists.data.map((function(e){return Object(s.jsx)(O.y,{style:{cursor:"pointer"},expandable:!0,before:Object(s.jsx)(O.b,{src:e.picture_xl}),onClick:function(){return t.props.getArtistsCard(e.id)},children:e.name},e.id)}))})]})}}]),r}(n.a.Component)),E=r(127),z=r.n(E),L=r(128),I=r.n(L),V=r(130),W=r.n(V),K=r(129),N=r.n(K),M=function(t){Object(g.a)(r,t);var e=Object(j.a)(r);function r(t){var s;return Object(h.a)(this,r),(s=e.call(this,t)).state={snackbar:null,isCooldown:!1},s}return Object(b.a)(r,[{key:"openError",value:function(t){var e=this;this.setState({snackbar:Object(s.jsx)(O.z,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:Object(s.jsx)(O.b,{size:24,style:{backgroundImage:"linear-gradient(135deg, #fc7373, #cb5e5a)"},children:Object(s.jsx)(B.a,{fill:"#fff",width:14,height:14})}),children:t})})}},{key:"openStory",value:function(){var t=this;this.props.setState({modal:Object(s.jsx)(O.q,{activeModal:"artistCard",onClose:this.props.setState({modal:null}),children:Object(s.jsx)(O.p,{id:"artistCard",onClose:function(){return t.props.setState({modal:null})},header:"\u041f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",actionsLayout:"vertical",actions:[{title:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c",mode:"primary",action:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.props.setState({popout:Object(s.jsx)(O.w,{})}),e.prev=1,e.t0=m.a,e.next=5,z()(document.getElementById("artistCardModal"),{backgroundColor:"rgba(0, 0, 0, 0)",useCORS:!0,scrollX:0,scrollY:0,removeContainer:!0,scale:5}).then(function(){var t=Object(p.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.toDataURL("image/png"));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:return e.t1=e.sent,e.t2={relation_width:.5,gravity:"center"},e.t3=[{action_type:"link",action:{link:"https://vk.com/app7647010#"+t.props.currentArtist.id}}],e.t4={can_delete:0,content_type:"image",blob:e.t1,transform:e.t2,clickable_zones:e.t3},e.t5={sticker_type:"renderable",sticker:e.t4},e.t6=[e.t5],e.t7={background_type:"none",stickers:e.t6},e.next=14,e.t0.send.call(e.t0,"VKWebAppShowStoryBox",e.t7);case 14:e.next=19;break;case 16:e.prev=16,e.t8=e.catch(1),t.openError("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \ud83d\ude1e");case 19:t.props.setState({popout:null,modal:null});case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}()},{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){return t.props.setState({modal:null})}}],children:Object(s.jsxs)("div",{id:"artistCardModal",style:{position:"relative",marginTop:12},children:[Object(s.jsx)("div",{style:{width:"100%",height:300,borderRadius:25,background:"linear-gradient(to bottom, rgba(65, 65, 65, .2), rgba(0, 0, 0, .9)), url(".concat(this.props.currentArtist.picture_xl,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"}}),Object(s.jsx)(O.B,{style:{color:"#fff",position:"absolute",bottom:18,fontSize:32,marginLeft:18,maxWidth:"85%"},weight:"heavy",children:this.props.currentArtist.name})]})})})})}},{key:"turnNotifications",value:function(){var t=Object(p.a)(d.a.mark((function t(e){var r,i,n,a,o,l,u,p,h,b=this;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.props.setPopout(Object(s.jsx)(O.w,{})),!e||this.state.isCooldown||!(null===(r=window)||void 0===r||null===(i=r.location)||void 0===i?void 0:i.search)){t.next=14;break}return t.prev=3,this.setState({isCooldown:!0}),t.next=7,m.a.send("VKWebAppAllowMessagesFromGroup",{group_id:74612115});case 7:this.setState({isCooldown:!1}),t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(3),this.setState({isCooldown:!1}),t.abrupt("return");case 14:return t.next=16,x.a.post("https://music.dan0102dan.ru/notifications",{toggle:e,id:this.props.currentArtist.id,sign:window.location.search.slice(1)});case 16:u=t.sent,this.props.setState((function(t){return{currentArtist:Object(c.a)(Object(c.a)({},t.currentArtist),{},{notifications:u.data.toggle})}})),u.data.toggle&&"artistsCard"===this.props.activePanel&&(null===(n=window)||void 0===n||null===(a=n.location)||void 0===a||null===(o=a.search)||void 0===o?void 0:o.match(/vk_platform=([a-z_]+)/))&&["mobile_android","mobile_iphone","mobile_android_messenger","mobile_iphone_messenger"].includes(null===(l=window.location.search)||void 0===l?void 0:l.match(/vk_platform=([a-z_]+)/)[1])&&this.setState({snackbar:Object(s.jsx)(O.z,{onClose:function(){return b.setState({snackbar:null})},action:"\u0414\u0430!",onActionClick:function(){return b.openStory()},before:Object(s.jsx)(O.b,{size:24,style:{backgroundImage:"linear-gradient(135deg, #714bdb, #715edb)"},children:Object(s.jsx)(I.a,{fill:"#fff",width:14,height:14})}),children:"\u0425\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0438\u0441\u0442\u043e\u0440\u0438\u0435\u0439?"})}),this.setState({isCooldown:!1}),this.props.setPopout(null),t.next=30;break;case 23:t.prev=23,t.t1=t.catch(0),console.log(t.t1),this.openError((null===t.t1||void 0===t.t1||null===(p=t.t1.response)||void 0===p||null===(h=p.data)||void 0===h?void 0:h.message)?t.t1.response.data.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u043a\u044e\u0447\u0435\u043d\u0438\u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439"),this.props.setState({isCooldown:!1}),this.props.setPopout(null),m.a.send("VKWebAppTapticNotificationOccurred",{type:"error"}).catch((function(){}));case 30:case"end":return t.stop()}}),t,this,[[0,23],[3,10]])})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t,e,r,i,n,a,o,c=this;return Object(s.jsxs)(O.r,{id:this.props.id,children:[Object(s.jsx)(O.s,{id:"artistsHeader",separator:!1,left:Object(s.jsx)(O.t,{style:{cursor:"pointer"},onClick:this.props.goBack})}),Object(s.jsxs)("div",{style:{position:"relative"},children:[Object(s.jsx)("div",{style:{width:"100%",height:500,borderBottomLeftRadius:25,borderBottomRightRadius:25,marginTop:"calc(-1px - var(--panelheader_height_ios) - var(--safe-area-inset-top))",background:"linear-gradient(to bottom, rgba(65, 65, 65, .2), rgba(0, 0, 0, .9)), url(".concat(this.props.currentArtist.picture_xl,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"}}),Object(s.jsx)(O.B,{style:{color:"#fff",position:"absolute",bottom:14,fontSize:"2.5em",marginLeft:18,maxWidth:"80%"},weight:"heavy",children:this.props.currentArtist.name}),this.props.currentArtist.notifications?Object(s.jsx)(N.a,{className:"checkedBell",width:40,height:40,style:{color:"#cfcfcf",position:"absolute",bottom:17,right:17,cursor:"pointer"},onClick:function(){return c.turnNotifications(!1)}}):Object(s.jsx)(W.a,{className:"Bell",width:40,height:40,style:{color:"#ea4632",position:"absolute",bottom:17,right:17,cursor:"pointer"},onClick:function(){return c.turnNotifications(!0)}})]}),(null===(t=this.props.currentArtist)||void 0===t||null===(e=t.tracks)||void 0===e?void 0:e.filter((function(t){return t.release_date})).length)>0&&Object(s.jsx)(O.k,{separator:"hide",header:Object(s.jsx)(O.l,{children:"\u041d\u0435\u0434\u0430\u0432\u043d\u0438\u0435 \u0440\u0435\u043b\u0438\u0437\u044b"}),children:Object(s.jsx)(O.m,{children:Object(s.jsx)("div",{style:{display:"flex"},children:this.props.currentArtist.tracks.filter((function(t){return t.release_date})).reduce((function(t,e,r){return t[Math.floor(r/3)]||(t[Math.floor(r/3)]=[]),t[Math.floor(r/3)][r%3]=e,t}),[]).map((function(t,e){return Object(s.jsx)(O.e,{children:t.map((function(t){return Object(s.jsxs)(O.y,{disabled:!0,style:{width:240},before:Object(s.jsx)(O.b,{mode:"image",src:t.album.cover_medium}),description:t.artist.name,children:[t.title," ",t.explicit_lyrics&&c.props.supportsEmoji&&"\ud83c\udd74"]},t.id)}))},e)}))})})}),Object(s.jsx)(O.k,{separator:"hide",header:Object(s.jsx)(O.l,{aside:Object(s.jsx)(O.n,{onClick:function(){return c.props.goToPage("viewAllTracks")},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}),children:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0442\u0440\u0435\u043a\u0438"}),children:Object(s.jsx)(O.m,{children:Object(s.jsx)("div",{style:{display:"flex"},children:(null===(r=this.props.currentArtist)||void 0===r||null===(i=r.tracks)||void 0===i?void 0:i.length)>0&&this.props.currentArtist.tracks.reduce((function(t,e,r){return t[Math.floor(r/3)]||(t[Math.floor(r/3)]=[]),t[Math.floor(r/3)][r%3]=e,t}),[]).map((function(t,e){return Object(s.jsx)(O.e,{children:t.map((function(t){return Object(s.jsxs)(O.y,{style:{width:240},disabled:!0,before:Object(s.jsx)(O.b,{mode:"image",src:t.album.cover_medium}),description:t.artist.name,children:[t.title," ",t.explicit_lyrics&&c.props.supportsEmoji&&"\ud83c\udd74"]},t.id)}))},e)}))})})}),(null===(n=this.props.currentArtist)||void 0===n||null===(a=n.albums)||void 0===a?void 0:a.length)>0&&Object(s.jsx)(O.k,{separator:"hide",header:Object(s.jsx)(O.l,{aside:Object(s.jsx)(O.n,{onClick:function(){c.props.setState({from:"newAlbums"}),c.props.goToPage("viewAllAlbums")},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}),children:"\u041d\u043e\u0432\u0438\u043d\u043a\u0438"}),children:Object(s.jsx)(O.f,{children:this.props.currentArtist.albums.map((function(t){return Object(s.jsx)(O.e,{onClick:Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.props.setPopout(Object(s.jsx)(O.w,{})),e.prev=1,e.next=4,x.a.get("https://dan0102dan.herokuapp.com/"+t.tracklist);case 4:t.tracks=e.sent.data.data,c.props.setState({currentAlbum:t}),c.props.goToPage("albumCard"),c.props.setState({popout:null}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),c.openError("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0430\u043b\u044c\u0431\u043e\u043c"),c.props.setPopout(null);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),size:"s",children:Object(s.jsxs)("div",{style:{width:184,height:236,cursor:"pointer",lineHeight:0},children:[Object(s.jsx)("img",{style:{width:184,height:184,borderRadius:4},src:t.cover_xl,alt:""}),Object(s.jsxs)(O.A,{weight:"medium",style:{textAlign:"left",marginTop:6,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[t.title," ",t.explicit_lyrics&&c.props.supportsEmoji&&"\ud83c\udd74"]}),Object(s.jsxs)(O.A,{weight:"regular",style:{textAlign:"left",marginTop:2,fontSize:13},children:["\u0410\u043b\u044c\u0431\u043e\u043c \u0432\u044b\u0448\u0435\u043b ",new Date(t.release_date).toLocaleString("ru",{day:"numeric",month:"numeric",year:"numeric"})]})]})},t.id)}))})}),(null===(o=this.props.currentArtist)||void 0===o?void 0:o.related)&&Object(s.jsx)(O.k,{separator:"hide",header:Object(s.jsx)(O.l,{mode:"secondary",children:"\u0410\u0440\u0442\u0438\u0441\u0442\u044b"}),children:Object(s.jsx)(O.f,{children:this.props.currentArtist.related.map((function(t){return Object(s.jsx)(O.e,{onClick:function(){return c.props.getArtistsCard(t.id)},size:"s",children:Object(s.jsxs)("div",{style:{width:124,height:154,cursor:"pointer",lineHeight:0},children:[Object(s.jsx)("img",{style:{width:124,height:124,borderRadius:"50%"},src:t.picture_xl,alt:""}),Object(s.jsx)(O.A,{weight:"medium",style:{textAlign:"center",marginTop:7},children:t.name})]})},t.id)}))})}),this.state.snackbar]})}}]),r}(n.a.Component),D=function(t){Object(g.a)(r,t);var e=Object(j.a)(r);function r(t){var s;return Object(h.a)(this,r),(s=e.call(this,t)).state={snackbar:null},s}return Object(b.a)(r,[{key:"openError",value:function(t){var e=this;this.setState({snackbar:Object(s.jsx)(O.z,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:Object(s.jsx)(O.b,{size:24,style:{backgroundImage:"linear-gradient(135deg, #fc7373, #cb5e5a)"},children:Object(s.jsx)(B.a,{fill:"#fff",width:14,height:14})}),children:t})})}},{key:"render",value:function(){var t=this;return Object(s.jsxs)(O.r,{id:this.props.id,children:[Object(s.jsx)(O.s,{separator:!1,left:Object(s.jsx)(O.t,{style:{cursor:"pointer"},onClick:this.props.goBack}),children:"newAlbums"===this.props.from?"\u041d\u043e\u0432\u0438\u043d\u043a\u0438":"homeLikes"===this.props.from&&"\u041d\u0435\u0434\u0430\u0432\u043d\u0438\u0435 \u0440\u0435\u043b\u0438\u0437\u044b"}),Object(s.jsx)(O.k,{separator:"hide",children:this.props.from&&_.get(this.props,"newAlbums"===this.props.from?"currentArtist.albums":"homeLikes"===this.props.from&&"catalog.newAlbums").map((function(e){return Object(s.jsxs)(O.y,{style:{cursor:"pointer"},expandable:!0,before:Object(s.jsx)(O.b,{mode:"image",src:e.cover_xl}),description:"\u0410\u043b\u044c\u0431\u043e\u043c \u0432\u044b\u0448\u0435\u043b ".concat(new Date(e.release_date).toLocaleString("ru",{day:"numeric",month:"numeric",year:"numeric"})),onClick:Object(p.a)(d.a.mark((function r(){var i,n;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.props.setPopout(Object(s.jsx)(O.w,{})),r.prev=1,r.next=4,x.a.get("https://dan0102dan.herokuapp.com/"+e.tracklist);case 4:e.tracks=r.sent.data.data,t.props.setState({currentAlbum:e}),t.props.goToPage("albumCard"),t.props.setPopout(null),r.next=15;break;case 10:r.prev=10,r.t0=r.catch(1),console.log(r.t0),t.openError((null===r.t0||void 0===r.t0||null===(i=r.t0.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)?r.t0.response.data.message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0430\u043b\u044c\u0431\u043e\u043c"),t.props.setPopout(null);case 15:case"end":return r.stop()}}),r,null,[[1,10]])}))),children:[e.title," ",e.explicit_lyrics&&t.props.supportsEmoji&&"\ud83c\udd74"]},e.id)}))}),this.state.snackbar]})}}]),r}(n.a.Component),H=function(t){Object(g.a)(r,t);var e=Object(j.a)(r);function r(){return Object(h.a)(this,r),e.apply(this,arguments)}return Object(b.a)(r,[{key:"render",value:function(){var t,e,r=this;return Object(s.jsxs)(O.r,{id:"viewAllTracks",children:[Object(s.jsx)(O.s,{separator:!1,left:Object(s.jsx)(O.t,{style:{cursor:"pointer"},onClick:this.props.goBack}),children:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0435"}),Object(s.jsx)(O.k,{separator:"hide",children:(null===(t=this.props.currentArtist)||void 0===t||null===(e=t.tracks)||void 0===e?void 0:e.length)>0&&this.props.currentArtist.tracks.map((function(t){return Object(s.jsxs)(O.y,{disabled:!0,before:Object(s.jsx)(O.b,{mode:"image",src:t.album.cover_medium}),description:t.artist.name,children:[t.title," ",t.explicit_lyrics&&r.props.supportsEmoji()&&"\ud83c\udd74"]},t.id)}))})]})}}]),r}(n.a.Component),F=function(t){Object(g.a)(r,t);var e=Object(j.a)(r);function r(t){var s;return Object(h.a)(this,r),(s=e.call(this,t)).state={snackbar:null},s}return Object(b.a)(r,[{key:"render",value:function(){var t,e,r=this;return Object(s.jsxs)(O.r,{id:this.props.id,children:[Object(s.jsx)(O.s,{separator:!1,left:Object(s.jsx)(O.t,{style:{cursor:"pointer"},onClick:this.props.goBack}),children:this.props.currentAlbum.title}),Object(s.jsx)(O.k,{separator:"hide",children:(null===(t=this.props.currentAlbum)||void 0===t||null===(e=t.tracks)||void 0===e?void 0:e.length)>0&&this.props.currentAlbum.tracks.map((function(t,e){return Object(s.jsxs)(O.y,{before:Object(s.jsx)(O.A,{style:{marginRight:12},children:(e+1).toString().padStart(2,"0")}),disabled:!0,description:t.artist.name,children:[t.title," ",t.explicit_lyrics&&r.props.supportsEmoji&&"\ud83c\udd74"]},t.id)}))}),this.state.snackbar]})}}]),r}(n.a.Component),G=function(t){Object(g.a)(r,t);var e=Object(j.a)(r);function r(){return Object(h.a)(this,r),e.apply(this,arguments)}return Object(b.a)(r,[{key:"render",value:function(){var t,e,r,i,n,a,o,c=this;return Object(s.jsxs)(O.r,{id:this.props.id,children:[Object(s.jsx)(PanelHeader,{separator:!1,left:Object(s.jsx)(PanelHeaderBack,{style:{cursor:"pointer"},onClick:this.goBack}),children:"\u041f\u043b\u0435\u0439\u043b\u0438\u0441\u0442"}),Object(s.jsx)("img",{style:{height:300,objectFit:"cover",borderRadius:25,marginLeft:"auto",marginRight:"auto",display:"block",marginBottom:8},src:this.state.currentPlaylist.picture_xl,alt:""}),Object(s.jsxs)(O.k,{separator:"hide",children:[(null===(t=this.state.currentPlaylist)||void 0===t||null===(e=t.tracks)||void 0===e?void 0:e.length)>0&&this.state.currentPlaylist.tracks.map((function(t){return Object(s.jsxs)(SimpleCell,{expandable:!0,onClick:function(){return c.getArtistsCard(t.artist.id)},before:Object(s.jsx)(Avatar,{mode:"image",src:t.album.cover_medium}),description:t.artist.name,children:[t.title," ",t.explicit_lyrics&&c.supportsEmoji()&&"\ud83c\udd74"]},t.id)})),Object(s.jsxs)(O.A,{weight:"medium",style:{marginTop:16,marginBottom:8,textAlign:"center"},children:[null===(r=this.state.currentPlaylist)||void 0===r||null===(i=r.tracks)||void 0===i?void 0:i.length," \u043f\u0435\u0441\u0435\u043d \u2022 ",null===(n=this.state.currentPlaylist)||void 0===n||null===(a=n.creation_date)||void 0===a?void 0:a.substring(0,(null===(o=this.state.currentPlaylist)||void 0===o?void 0:o.creation_date.length)-15)]})]}),this.state.snackbar]})}}]),r}(n.a.Component),U=r.p+"static/media/DuaLipa.ac7e2d0c.jpg",q=r.p+"static/media/BillieEilish.11912ddf.jpg",J=r.p+"static/media/ArianaGrande.5e8c2779.jpg",X=function(t){Object(g.a)(r,t);var e=Object(j.a)(r);function r(t){var s;return Object(h.a)(this,r),(s=e.call(this,t)).goBack=function(){var t=s.state.history;"greeting1"===s.state.activePanel&&m.a.send("VKWebAppDisableSwipeBack"),t.length>1&&(t.pop(),s.setState({activePanel:t[t.length-1]}))},s.state={activePanel:"greeting1",history:["greeting1"]},s}return Object(b.a)(r,[{key:"goToPage",value:function(t){window.history.pushState({panel:t},t),"greeting1"===this.state.activePanel&&m.a.send("VKWebAppEnableSwipeBack"),this.setState({activePanel:t,history:[].concat(Object(l.a)(this.state.history),[t])})}},{key:"componentDidMount",value:function(){var t=this;window.addEventListener("popstate",(function(){return t.goBack()})),window.Image&&((new window.Image).src=U,(new window.Image).src=q,(new window.Image).src=J)}},{key:"render",value:function(){var t=this;return Object(s.jsxs)(O.C,{activePanel:this.state.activePanel,history:this.state.history,onSwipeBack:this.goBack,children:[Object(s.jsxs)(O.r,{id:"greeting1",children:[Object(s.jsx)("div",{style:{width:"100%",height:"100%",background:"#00a1e3",position:"fixed",zIndex:-1,top:0}}),Object(s.jsx)("div",{className:"IntroImg",style:{width:"100%",height:"calc(500px + var(--safe-area-inset-top))",borderBottomLeftRadius:25,marginBottom:12,borderBottomRightRadius:35,position:"relative",background:"linear-gradient(to bottom, rgba(0,0,0,.1) 10%, rgba(0,0,0,.3)), url(".concat(U,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},children:Object(s.jsx)(O.B,{style:{position:"absolute",bottom:14,color:"#fff",fontSize:"2.5em",marginLeft:12,maxWidth:"90%",lineHeight:1},weight:"heavy",children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"})}),Object(s.jsx)(O.B,{className:"helloDescribe",style:{color:"#fff",fontSize:"1.5em",marginLeft:12,marginBottom:12},weight:"heavy",children:"\u041c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0432\u0438\u043d\u043a\u0438 \u2014 \u0412\u0430\u0448 \u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u0432 \u043c\u0443\u0437\u044b\u043a\u0435."}),Object(s.jsx)(O.j,{children:Object(s.jsx)(O.d,{mode:"overlay_primary",size:"xl",onClick:function(){t.goToPage("greeting2")},children:"\u0414\u0430\u043b\u0435\u0435"})})]}),Object(s.jsxs)(O.r,{id:"greeting2",children:[Object(s.jsx)("div",{style:{width:"100%",height:"100%",background:"linear-gradient(135deg, #332f28, #36332d)",position:"fixed",zIndex:-1,top:0}}),Object(s.jsx)("div",{className:"IntroImg",style:{width:"100%",height:"calc(500px + var(--safe-area-inset-top))",borderBottomLeftRadius:25,marginBottom:12,borderBottomRightRadius:35,position:"relative",background:"linear-gradient(to bottom, rgba(0,0,0,.1) 10%, rgba(0,0,0,.3)), url(".concat(q,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},children:Object(s.jsx)(O.B,{style:{position:"absolute",bottom:14,color:"#fff",fontSize:"2em",marginLeft:12,maxWidth:"90%",lineHeight:1},weight:"heavy",children:"\u041f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u0439\u0442\u0435\u0441\u044c \u043d\u0430 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f!"})}),Object(s.jsx)(O.B,{className:"helloDescribe",style:{color:"#fff",fontSize:"1.5em",marginLeft:12,marginBottom:12},weight:"heavy",children:"\u041f\u043e\u0441\u043b\u0435 \u0440\u0435\u043b\u0438\u0437\u0430 \u043f\u0435\u0441\u043d\u0438 \u0431\u043e\u0442 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0438\u0442 \u0412\u0430\u043c \u043e\u0431 \u044d\u0442\u043e\u043c."}),Object(s.jsx)(O.j,{children:Object(s.jsx)(O.d,{mode:"overlay_primary",size:"xl",onClick:function(){t.goToPage("greeting3")},children:"\u041f\u0440\u0438\u043a\u043e\u043b\u044c\u043d\u0435\u043d\u044c\u043a\u043e"})})]}),Object(s.jsxs)(O.r,{id:"greeting3",children:[Object(s.jsx)("div",{style:{width:"100%",height:"100%",background:"linear-gradient(#cdd0d4, #767676)",position:"fixed",zIndex:-1,top:0}}),Object(s.jsx)("div",{className:"IntroImg",style:{width:"100%",height:"calc(500px + var(--safe-area-inset-top))",borderBottomLeftRadius:25,marginBottom:12,borderBottomRightRadius:35,position:"relative",background:"linear-gradient(to bottom, rgba(0,0,0,.1) 10%, rgba(0,0,0,.3)), url(".concat(J,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},children:Object(s.jsx)(O.B,{style:{position:"absolute",bottom:14,color:"#fff",fontSize:"2.5em",marginLeft:12,maxWidth:"90%",lineHeight:1},weight:"heavy",children:"\u0411\u0443\u0434\u044c \u0432 \u0442\u0440\u0435\u043d\u0434\u0435!"})}),Object(s.jsx)(O.B,{className:"helloDescribe",style:{color:"#fff",fontSize:"1.5em",marginLeft:12,marginBottom:12},weight:"heavy",children:"\u0421\u043b\u0443\u0448\u0430\u0439 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u043f\u0435\u0441\u043d\u0438 \u043f\u0440\u044f\u043c\u043e \u0432 \u0441\u0435\u0440\u0432\u0438\u0441\u0435."}),Object(s.jsx)(O.j,{children:Object(s.jsx)(O.d,{mode:"overlay_primary",size:"xl",onClick:Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.props.setActiveView("home"),e.next=3,m.a.send("VKWebAppStorageSet",{key:"greeting",value:"true"});case 3:case"end":return e.stop()}}),e)}))),children:"\u0412 \u0441\u0435\u0440\u0432\u0438\u0441!"})})]})]})}}]),r}(n.a.Component),Y=(r(287),function(t){Object(g.a)(r,t);var e=Object(j.a)(r);function r(t){var s;return Object(h.a)(this,r),(s=e.call(this,t)).goBack=function(){var t=s.state.history;"home"===s.state.activePanel&&m.a.send("VKWebAppDisableSwipeBack"),1===t.length?m.a.send("VKWebAppClose",{status:"success"}):t.length>1&&(t.pop(),s.setState({activePanel:t[t.length-1],snackbar:null}))},s.someBridgeThings=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m.a.subscribe((function(t){var e=t.detail,r=e.type,i=e.data;if("VKWebAppUpdateConfig"===r){var n=document.createAttribute("scheme");n.value=i.scheme?i.scheme:"bright_light",document.body.attributes.setNamedItem(n),m.a.send("VKWebAppSetViewSettings",{status_bar_style:"bright_light"===i.scheme?"dark":"light",action_bar_color:"bright_light"===i.scheme?"#ffffff":"#191919"}).catch((function(){}))}else"VKWebAppViewHide"===r&&s.setState({popout:null})})),m.a.send("VKWebAppInit"),m.a.send("VKWebAppStorageGet",{keys:["greeting"]}).then((function(t){var e;""===(null===t||void 0===t||null===(e=t.keys[0])||void 0===e?void 0:e.value)&&s.setState({activeView:"greeting"})})),t.t0=s,t.next=7,m.a.send("VKWebAppGetUserInfo");case 7:t.t1=t.sent,t.t2={user:t.t1},t.t0.setState.call(t.t0,t.t2),t.next=15;break;case 12:t.prev=12,t.t3=t.catch(0),console.log(t.t3);case 15:case"end":return t.stop()}}),t,null,[[0,12]])}))),s.state={activeView:"home",activePanel:"home",history:["home"],slideIndex:0,popout:null,modal:null,user:{},search:"",searchResults:[],artists:[],currentArtist:{},currentPlaylist:{},currentAlbum:{},catalog:{},from:""},s}return Object(b.a)(r,[{key:"goToPage",value:function(t){window.history.pushState({panel:t},t),"home"===this.state.activePanel&&m.a.send("VKWebAppEnableSwipeBack"),this.setState({activePanel:t,history:[].concat(Object(l.a)(this.state.history),[t]),snackbar:null})}},{key:"openError",value:function(t){var e=this;this.setState({popout:Object(s.jsxs)(O.a,{actionsLayout:"vertical",actions:[{title:"\u0425\u043e\u0440\u043e\u0448\u043e",autoclose:!0,mode:"cancel"}],onClose:function(){return e.setState({popout:null})},children:[Object(s.jsx)("h2",{children:t}),Object(s.jsx)("p",{children:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0412\u0430\u0448\u0435\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f."})]})})}},{key:"componentDidMount",value:function(){var t=this;window.addEventListener("popstate",(function(){return t.goBack()})),window.location.hash&&this.getArtistsCard(Number(window.location.hash.replace("#",""))),this.someBridgeThings()}},{key:"getArtistsCard",value:function(){var t=Object(p.a)(d.a.mark((function t(e){var r,i=this;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null===(r=this.state.currentArtist)||void 0===r?void 0:r.id)!==e){t.next=3;break}return this.goToPage("artistsCard"),t.abrupt("return");case 3:this.setState({popout:Object(s.jsx)(O.w,{})});try{x.a.post("https://music.dan0102dan.ru/getArtist",{id:e,sign:window.location.search.slice(1)}).then((function(t){var e=t.data;e.artistsCard.albums=e.artistsCard.albums.sort((function(t,e){return e.release_date-t.release_date})),i.setState({currentArtist:e.artistsCard},Object(p.a)(d.a.mark((function t(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.goToPage("artistsCard"),t.prev=1,t.next=4,x.a.get("https://dan0102dan.herokuapp.com/https://api.deezer.com/artist/".concat(i.state.currentArtist.id,"/playlists"));case 4:e=t.sent.data.data,i.setState((function(t){return{currentArtist:Object(c.a)(Object(c.a)({},t.currentArtist),{},{playlists:e})}})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))),i.setState({popout:null})})).catch((function(t){console.log(t),i.openError("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u0430\u0440\u0442\u0438\u0441\u0442\u0430")}))}catch(n){this.openError("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u0430\u0440\u0442\u0438\u0441\u0442\u0430")}case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"supportsEmoji",value:function(){var t=document.createElement("canvas").getContext("2d");return t.fillText("\ud83c\udd74",-2,4),t.getImageData(0,0,1,1).data[3]>0}},{key:"render",value:function(){var t,e,r,i,n=this;return Object(s.jsx)(O.h,{webviewType:(null===(t=window)||void 0===t||null===(e=t.location)||void 0===e||null===(r=e.search)||void 0===r?void 0:r.match(/vk_platform=([a-z_]+)/))&&["mobile_android","mobile_iphone","mobile_android_messenger","mobile_iphone_messenger","mobile_web"].includes(null===(i=window.location.search)||void 0===i?void 0:i.match(/vk_platform=([a-z_]+)/)[1])?"vkapps":"internal",children:Object(s.jsxs)(O.v,{activeView:this.state.activeView,children:[Object(s.jsxs)(O.C,{id:"home",activePanel:this.state.activePanel,history:this.state.history,onSwipeBack:this.goBack,popout:this.state.popout,modal:this.state.modal,children:[Object(s.jsx)(P,{id:"home",setPopout:function(t){return n.setState({popout:t})},catalog:this.state.catalog,user:this.state.user,supportsEmoji:this.supportsEmoji(),setState:function(t){return n.setState(t)},goToPage:function(t){return n.goToPage(t)},getArtistsCard:function(t){return n.getArtistsCard(t)},search:this.state.search,searchResults:this.state.searchResults}),Object(s.jsx)(R,{id:"profile",user:this.state.user,goBack:function(){return n.goBack()},setPopout:function(t){return n.setState({popout:t})},setState:function(t){return n.setState(t)}}),Object(s.jsx)(T,{id:"viewAllArtists",goBack:function(){return n.goBack()},getArtistsCard:function(t){return n.getArtistsCard(t)},from:this.state.from,catalog:this.state.catalog}),Object(s.jsx)(M,{id:"artistsCard",goBack:function(){return n.goBack()},currentArtist:this.state.currentArtist,supportsEmoji:this.supportsEmoji(),goToPage:function(t){return n.goToPage(t)},setState:function(t){return n.setState(t)},setPopout:function(t){return n.setState({popout:t})},getArtistsCard:function(t){return n.getArtistsCard(t)},activePanel:this.state.activePanel,user:this.state.user}),Object(s.jsx)(D,{id:"viewAllAlbums",goBack:function(){return n.goBack()},currentArtist:this.state.currentArtist,catalog:this.state.catalog,supportsEmoji:this.supportsEmoji(),goToPage:function(t){return n.goToPage(t)},setState:function(t){return n.setState(t)},setPopout:function(t){return n.setState({popout:t})},from:this.state.from}),Object(s.jsx)(H,{id:"viewAllTracks",goBack:function(){return n.goBack()},currentArtist:this.state.currentArtist,supportsEmoji:this.supportsEmoji()}),Object(s.jsx)(F,{id:"albumCard",goBack:function(){return n.goBack()},currentAlbum:this.state.currentAlbum,supportsEmoji:this.supportsEmoji()}),Object(s.jsx)(G,{id:"playlistCard",goBack:function(){return n.goBack()}})]}),Object(s.jsx)(X,{setActiveView:function(t){return n.setState({activeView:t})},id:"greeting"})]})})}}]),r}(n.a.Component));o.a.render(Object(s.jsx)(Y,{}),document.getElementById("root"))}},[[288,1,2]]]);