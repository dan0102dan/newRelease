(this.webpackJsonpnewrelease=this.webpackJsonpnewrelease||[]).push([[0],{193:function(t,e,a){t.exports=a(329)},300:function(t,e,a){},326:function(t,e){},329:function(t,e,a){"use strict";a.r(e);a(194),a(220),a(222),a(223),a(225),a(226),a(227),a(228),a(229),a(230),a(231),a(232),a(234),a(235),a(236),a(237),a(238),a(239),a(240),a(241),a(242),a(243),a(245),a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(253),a(254),a(255),a(256),a(257),a(258),a(259),a(260),a(261),a(262);var r=a(0),n=a.n(r),i=a(115),s=a.n(i),o=a(18),c=a.n(o),l=a(72),u=a(133),d=a(12),h=a.n(d),p=a(28),m=a(116),f=a(117),v=a(135),g=a(134),y=a(71),b=a.n(y),E=a(3),k=(a(299),a(129)),w=a.n(k),x=a(130),A=a.n(x),S=a(132),C=a.n(S),_=a(131),j=a.n(_),P=(a(300),a(128)),R=a.n(P)()("https://music.dan0102dan.ru"),O=function(t){Object(v.a)(a,t);var e=Object(g.a)(a);function a(t){var r;return Object(m.a)(this,a),(r=e.call(this,t)).goBack=function(){var t=r.state.history;"home"===r.state.activePanel&&c.a.send("VKWebAppDisableSwipeBack"),t.length>1&&(t.pop(),r.setState({activePanel:t[t.length-1]}))},r.onChange=function(){var t=Object(p.a)(h.a.mark((function t(e){var a,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.setState({searchResults:n.a.createElement(E.m,null),search:e.target.value}),!(e.target.value.length>0)){t.next=9;break}return t.next=4,b.a.get("https://deezerdevs-deezer.p.rapidapi.com/search?q=".concat(encodeURIComponent(e.target.value)),{headers:{"x-rapidapi-key":"aa262e04c6msh0fdfa92d02aff45p1e848ajsn1a6084920c73","x-rapidapi-host":"deezerdevs-deezer.p.rapidapi.com",useQueryString:!0}});case 4:a=t.sent,(null===(i=a.data)||void 0===i?void 0:i.data)&&(null===i||void 0===i?void 0:i.total)>0?r.setState({searchResults:i.data}):r.setState({searchResults:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),t.next=10;break;case 9:Array.isArray(r.state.searchResults)&&r.setState({searchResults:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.state={activePanel:"home",history:["home"],popout:null,modal:null,avatar:null,search:"",artists:[],searchResults:[],currentArtist:{},currentPlaylist:{},catalog:{}},r}return Object(f.a)(a,[{key:"goToPage",value:function(t){window.history.pushState({panel:t},t),"home"===this.state.activePanel&&c.a.send("VKWebAppEnableSwipeBack"),this.setState({activePanel:t,history:[].concat(Object(u.a)(this.state.history),[t])})}},{key:"openError",value:function(t){var e=this;this.setState({snackbar:n.a.createElement(E.p,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:n.a.createElement(E.a,{size:24,style:{backgroundImage:"linear-gradient(135deg, #fc7373, #cb5e5a)"}},n.a.createElement(w.a,{fill:"#fff",width:14,height:14}))},t)})}},{key:"componentDidMount",value:function(){var t=Object(p.a)(h.a.mark((function t(){var e=this;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.addEventListener("popstate",(function(){return e.goBack()})),this.startSocket(),R.emit("HomeCatalog",{sign:window.location.search.slice(1)}),t.t0=this,t.next=6,c.a.send("VKWebAppGetUserInfo");case 6:t.t1=t.sent.photo_200,t.t2={avatar:t.t1},t.t0.setState.call(t.t0,t.t2),c.a.subscribe((function(t){"VKWebAppViewHide"===t.detail.type&&e.setState({popout:null})}));case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"startSocket",value:function(){var t=this;R.on("message",(function(e){var a,r;(null===e||void 0===e?void 0:e.data)?"HomeCatalog"===e.method?((null===(a=e.data)||void 0===a||null===(r=a.tracks)||void 0===r?void 0:r.data)&&(e.data.tracks.data=e.data.tracks.data.reduce((function(t,e,a){return t[Math.floor(a/3)]||(t[Math.floor(a/3)]=[]),t[Math.floor(a/3)][a%3]=e,t}),[])),t.setState({catalog:e.data})):"getArtist"===e.method?(e.data.tracks=e.data.tracks.reduce((function(t,e,a){return t[Math.floor(a/3)]||(t[Math.floor(a/3)]=[]),t[Math.floor(a/3)][a%3]=e,t}),[]),t.setState({currentArtist:e.data},(function(){return t.goToPage("artistsCard")})),t.setState({popout:null})):"notifications"===e.method&&t.setState((function(t){return{currentArtist:Object(l.a)(Object(l.a)({},t.currentArtist),{},{notifications:e.data.toggle})}})):(null===e||void 0===e?void 0:e.error)&&("HomeCatalog"===e.method?t.openError("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"):"getArtist"===e.method?(t.openError("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443 \u0430\u0440\u0442\u0438\u0441\u0442\u0430"),t.setState({popout:null})):"notifications"===e.method?(t.openError(e.error),c.a.send("VKWebAppTapticNotificationOccurred",{type:"error"})):(t.openError(e.error),t.setState({popout:null})))}))}},{key:"turnNotifications",value:function(){var t=Object(p.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.emit("notifications",{toggle:e,id:this.state.currentArtist.id,sign:window.location.search.slice(1)});case 2:c.a.send("VKWebAppTapticSelectionChanged",{});case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getArtistsCard",value:function(){var t=Object(p.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({popout:n.a.createElement(E.m,null)}),t.prev=1,t.next=4,R.emit("getArtist",{id:e,sign:window.location.search.slice(1)});case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),this.openError("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443 \u0430\u0440\u0442\u0438\u0441\u0442\u0430"),this.setState({popout:null});case 10:case"end":return t.stop()}}),t,this,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()},{key:"playlistCard",value:function(){var t=Object(p.a)(h.a.mark((function t(e){var a,r,i,s=this;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({popout:n.a.createElement(E.m,null)}),t.prev=1,a=this.state.catalog.playlists.data[e],t.next=5,b.a.get("https://cors-anywhere.herokuapp.com/".concat(a.tracklist),{headers:{"x-rapidapi-key":"aa262e04c6msh0fdfa92d02aff45p1e848ajsn1a6084920c73","x-rapidapi-host":"deezerdevs-deezer.p.rapidapi.com",useQueryString:!0}});case 5:r=t.sent,i=r.data,a.tracks=i.data,this.setState({popout:null,currentPlaylist:a},(function(){return s.goToPage("playlistCard")})),console.log(this.state.currentPlaylist),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),this.openError("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443 \u0430\u0440\u0442\u0438\u0441\u0442\u0430"),this.setState({popout:null});case 16:case"end":return t.stop()}}),t,this,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t,e,a,r,i,s,o,c,l,u,d,m,f,v,g,y,b,k,w,x,S,_=this;return n.a.createElement(E.d,{isWebView:!0,scheme:document.body.getAttribute("scheme")?document.body.getAttribute("scheme"):"bright_light",webviewType:(null===(t=window)||void 0===t||null===(e=t.location)||void 0===e||null===(a=e.search)||void 0===a?void 0:a.match(/vk_platform=([a-z_]+)/))?["mobile_android","mobile_iphone","mobile_android_messenger","mobile_iphone_messenger"].includes(null===(r=window.location.search)||void 0===r?void 0:r.match(/vk_platform=([a-z_]+)/)[1])?"vkapps":"internal":null},n.a.createElement(E.s,{activePanel:this.state.activePanel,history:this.state.history,onSwipeBack:this.goBack,popout:this.state.popout,modal:this.state.modal},n.a.createElement(E.j,{id:"home"},n.a.createElement(E.k,{left:n.a.createElement(E.a,{style:{marginLeft:-5},size:36,src:this.state.avatar?this.state.avatar:null}),separator:!1},n.a.createElement(E.n,{value:this.state.search,onChange:this.onChange})),this.state.search?Array.isArray(this.state.searchResults)&&this.state.searchResults.length>0?n.a.createElement(n.a.Fragment,null,n.a.createElement(E.f,{separator:"hide",header:n.a.createElement(E.g,{mode:"secondary"},"\u0410\u0440\u0442\u0438\u0441\u0442\u044b")},n.a.createElement(E.i,null,n.a.createElement("div",{style:{display:"flex"}},this.state.searchResults.map((function(t,e,a){var r=t.artist;return a.findIndex((function(t){return t.artist.id===r.id}))>=e&&n.a.createElement("div",{"data-mode":r.id,key:r.id,style:{display:"flex",flexShrink:0,width:80,height:94,flexDirection:"column",alignItems:"center",fontSize:12,paddingLeft:4},onClick:function(){var t=Object(p.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_.getArtistsCard(e.currentTarget.dataset.mode));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},n.a.createElement(E.a,{size:64,src:r.picture_xl,style:{marginBottom:8}}),r.name.length>17?r.name.slice(0,13)+"...":r.name)}))))),n.a.createElement(E.f,{separator:"hide",header:n.a.createElement(E.g,{mode:"secondary"},"\u041f\u0435\u0441\u043d\u0438 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u0439")},this.state.searchResults.map((function(t){return n.a.createElement(E.o,{key:t.id,expandable:!0,"data-mode":t.artist.id,before:n.a.createElement(E.a,{mode:"image",src:t.album.cover_medium}),description:t.artist.name,after:Math.floor(t.duration/60)+":"+"".concat(t.duration%60).padEnd(2,"0"),onClick:function(){var t=Object(p.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_.getArtistsCard(e.currentTarget.dataset.mode));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},t.title)})))):n.a.createElement(E.e,null,n.a.createElement(E.r,{level:"1",weight:"semibold",style:{marginTop:32}},this.state.searchResults)):n.a.createElement(n.a.Fragment,null,n.a.createElement(E.f,{separator:"hide",header:n.a.createElement(E.g,null,"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0430\u0440\u0442\u0438\u0441\u0442\u044b")},n.a.createElement(E.c,null,(null===(i=this.state.catalog)||void 0===i||null===(s=i.artists)||void 0===s?void 0:s.data)&&this.state.catalog.artists.data.map((function(t){return n.a.createElement(E.b,{"data-mode":t.id,onClick:function(){var t=Object(p.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_.getArtistsCard(e.currentTarget.dataset.mode));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),key:t.id,size:"s"},n.a.createElement("div",{style:{width:154,height:190,cursor:"pointer",lineHeight:0}},n.a.createElement("img",{style:{width:154,height:154,borderRadius:8},src:t.picture_xl,alt:""}),n.a.createElement("div",{style:{width:154,height:34,marginTop:7}},n.a.createElement(E.h,{weight:"semibold"},t.name))))})))),n.a.createElement(E.f,{separator:"hide",header:n.a.createElement(E.g,null,"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0442\u0440\u0435\u043a\u0438")},n.a.createElement(E.i,null,n.a.createElement("div",{style:{display:"flex"}},(null===(o=this.state.catalog)||void 0===o||null===(c=o.tracks)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.length)>0&&this.state.catalog.tracks.data.map((function(t,e){return n.a.createElement(E.b,{key:e},t.map((function(t){return n.a.createElement(E.o,{style:{width:300},key:t.id,disabled:!0,before:n.a.createElement(E.a,{mode:"image",src:t.album.cover_medium}),after:n.a.createElement(A.a,{fill:"var(--accent)","data-mode":t.artist.id,onClick:function(){var t=Object(p.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_.getArtistsCard(e.currentTarget.dataset.mode));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),description:t.artist.name},t.title," ",t.explicit_lyrics&&"\ud83c\udd74")})))}))))),n.a.createElement(E.f,{separator:"hide",header:n.a.createElement(E.g,null,"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u043f\u043b\u0435\u0439\u043b\u0438\u0441\u0442\u044b")},n.a.createElement(E.c,null,(null===(u=this.state.catalog)||void 0===u||null===(d=u.playlists)||void 0===d?void 0:d.data)&&this.state.catalog.playlists.data.map((function(t,e){return n.a.createElement(E.b,{key:t.id,size:"s","data-mode":e,onClick:function(){var t=Object(p.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_.playlistCard(e.currentTarget.dataset.mode));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},n.a.createElement("div",{style:{width:154,height:225,cursor:"pointer",lineHeight:0}},n.a.createElement("img",{style:{width:154,height:154,borderRadius:8},src:t.picture_xl,alt:""}),n.a.createElement("div",{style:{width:154,height:34,marginTop:7}},n.a.createElement(E.h,{weight:"semibold"},t.title))))}))))),this.state.snackbar),n.a.createElement(E.j,{id:"playlistCard"},n.a.createElement(E.k,{id:"artistsHeader",separator:!1,left:n.a.createElement(E.l,{style:{cursor:"pointer"},onClick:function(){return window.history.back()}})}),n.a.createElement("div",{style:{position:"relative"}},n.a.createElement("img",{style:{width:"100%",height:400,objectFit:"cover",borderBottomLeftRadius:25,borderBottomRightRadius:25,marginTop:"calc(-1px - var(--panelheader_height_ios) - var(--safe-area-inset-top))"},src:this.state.currentPlaylist.picture_xl,alt:""})),n.a.createElement(E.r,{style:{textAlign:"center",marginBottom:4},level:"1",weight:"bold"},null===(m=this.state.currentPlaylist)||void 0===m?void 0:m.title),n.a.createElement(E.r,{style:{textAlign:"center"},level:"4",weight:"semibold"},null===(f=this.state.currentPlaylist)||void 0===f||null===(v=f.user)||void 0===v?void 0:v.name),n.a.createElement(E.f,{separator:"hide"},(null===(g=this.state.currentPlaylist)||void 0===g||null===(y=g.tracks)||void 0===y?void 0:y.length)>0&&this.state.currentPlaylist.tracks.map((function(t){return n.a.createElement(E.o,{expandable:!0,"data-mode":t.artist.id,onClick:function(){var t=Object(p.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_.getArtistsCard(e.currentTarget.dataset.mode));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),key:t.id,before:n.a.createElement(E.a,{mode:"image",src:t.album.cover_medium}),description:t.artist.name},t.title," ",t.explicit_lyrics&&"\ud83c\udd74")})),n.a.createElement(E.q,{weight:"medium",style:{marginTop:16,marginBottom:8,textAlign:"center"}},null===(b=this.state.currentPlaylist)||void 0===b||null===(k=b.tracks)||void 0===k?void 0:k.length," \u043f\u0435\u0441\u0435\u043d \u2022 ",null===(w=this.state.currentPlaylist)||void 0===w?void 0:w.creation_date)),this.state.snackbar),n.a.createElement(E.j,{id:"artistsCard"},n.a.createElement(E.k,{id:"artistsHeader",separator:!1,left:n.a.createElement(E.l,{style:{cursor:"pointer"},onClick:function(){return window.history.back()}})}),n.a.createElement("div",{style:{position:"relative"}},n.a.createElement("img",{style:{width:"100%",height:500,objectFit:"cover",borderBottomLeftRadius:25,borderBottomRightRadius:25,marginTop:"calc(-1px - var(--panelheader_height_ios) - var(--safe-area-inset-top))"},src:this.state.currentArtist.picture_xl,alt:""}),n.a.createElement(E.r,{style:{color:"#fff",position:"absolute",bottom:30,fontSize:"2.5em",marginLeft:12,textShadow:"0px 2px 3px #000"},weight:"heavy"},this.state.currentArtist.name),this.state.currentArtist.notifications?n.a.createElement(j.a,{width:40,height:40,style:{color:"#fff",position:"absolute",bottom:30,right:10,height:50},onClick:function(){return _.turnNotifications(!1)}}):n.a.createElement(C.a,{width:40,height:40,style:{color:"#fff",position:"absolute",bottom:30,right:10,height:50},onClick:function(){return _.turnNotifications(!0)}})),n.a.createElement(E.f,{separator:"hide",header:n.a.createElement(E.g,null,"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0442\u0440\u0435\u043a\u0438")},n.a.createElement(E.i,null,n.a.createElement("div",{style:{display:"flex"}},(null===(x=this.state.currentArtist)||void 0===x||null===(S=x.tracks)||void 0===S?void 0:S.length)>0&&this.state.currentArtist.tracks.map((function(t,e){return n.a.createElement(E.b,{key:e},t.map((function(t){return n.a.createElement(E.o,{style:{width:240},disabled:!0,key:t.id,before:n.a.createElement(E.a,{mode:"image",src:t.album.cover_medium}),description:t.artist.name},t.title," ",t.explicit_lyrics&&"\ud83c\udd74")})))}))))),this.state.snackbar)))}}]),a}(n.a.Component);s.a.render(n.a.createElement(O,null),document.getElementById("root")),c.a.subscribe((function(t){var e=t.detail,a=e.type,r=e.data;if("VKWebAppUpdateConfig"===a){var n=document.createAttribute("scheme");n.value=r.scheme?r.scheme:"bright_light",document.body.attributes.setNamedItem(n)}})),c.a.send("VKWebAppInit")}},[[193,1,2]]]);